function initializeAnimations() {
    inAnimation = $("html").attr("data-inAnimation"), outAnimation = $("html").attr("data-outAnimation"), safeModPageInAnimation = $("html").attr("data-safeModPageInAnimation"), safeModPageOutAnimation = $("html").attr("data-safeModPageOutAnimation"), lightboxInAnimation = $("html").attr("data-lightboxInAnimation"), profileImageAnimation = $("html").attr("data-profileImageAnimation"), duration = $("html").attr("data-jmpressAnimationDuration"), $(".te-transition").addClass(profileImageAnimation)
}

// function showProjectDetails(e) {
//     var t = $(".p-overlay:not(.active)").first();
//     pActive = $(".p-overlay.active"), $("html").removeClass("no-overflow"), pActive.length && hideProjectDetails(), t.empty().load($.address.baseURL() + "/" + e + " .portfolio-single", function () {
//         t.waitForImages(function () {
//             hideLoader(), setTimeout(function () {
//                 $(".portfolio-single").fitVids()
//             }, 100), Modernizr.csstransforms && Modernizr.csstransforms3d ? t.removeClass("animated " + outAnimation + " " + inAnimation).addClass("animated " + inAnimation).show() : t.fadeIn(), t.addClass("active"), safeMod && $("#pages").css("max-height", t.height() - $("#header").outerHeight()).css("overflow", "hidden")
//         }, null, !0)
//     })
// }

// function hideProjectDetails(e, t) {
//     $("body").scrollTop(0), e && (pActive = $(".p-overlay.active"), safeMod || $("html").addClass("no-overflow"), t || $.address.path(portfolioKeyword), safeMod && $("#pages").css("max-height", "none").css("overflow", "visible")), pActive.removeClass("active"), Modernizr.csstransforms && Modernizr.csstransforms3d ? (pActive.removeClass("animated " + inAnimation).addClass("animated " + outAnimation), setTimeout(function () {
//         pActive.hide().removeClass(outAnimation).empty()
//     }, 1010)) : pActive.fadeOut().empty()
// }

function giveDetailUrl() {
    var e, t = $.address.value();
    if (-1 != t.indexOf("/" + portfolioKeyword + "/") && t.length > portfolioKeyword.length + 2) {
        var a = t.length;
        e = t.slice(portfolioKeyword.length + 2, a)
    } else e = -1;
    return e
}

function setupScrollBars() {
    safeMod || $(".iscroll-wrapper").jScroll({
        useTransition: !!jQuery.browser.touch,
        fadeScrollbar: !jQuery.browser.mobile,
        lockDirection: !1,
        hideScrollbar: "false" != $("html").attr("data-hideScrollbar"),
        forceIscroll: !0,
        scrollbarClass: "iscrollbar"
    })
}

function refreshScrollBars() {
    safeMod || $(".iscroll-wrapper").jScroll("refresh")
}

function setCurrentMenuItem() {
    var e = $("#pages .active").attr("id");
    $("#header nav ul a").removeClass("waiting"), $("#header nav ul a[href$=" + e + "]").parent().addClass("current-menu-item").siblings().removeClass("current-menu-item"), $("select.mobile-nav option").attr("selected", ""), $("select.mobile-nav option[value$=" + e + "]").attr("selected", "selected")
}

function setupPortfolio() {
    var e = $("#portfolio-items");
    e.length && e.waitForImages(function () {
        e.isotope({
            itemSelector: ".item",
            layoutMode: "masonry",
            transformsEnabled: !jQuery.browser.mobile,
            onLayout: function () {
                setTimeout(function () {
                    refreshScrollBars()
                }, 500)
            }
        }), $("#filters a").click(function () {
            var t = $(this).attr("data-filter");
            return e.isotope({
                filter: t
            }), $(this).parent().addClass("current").siblings().removeClass("current"), !1
        })
    }, null, !0)
}

function animateBars() {
    emptyBars(), $(".bar").each(function () {
        var e = $(this);
        setTimeout(function () {
            e.find(".progress").addClass("easing-long").css("width", e.attr("data-percent") + "%")
        }, duration)
    })
}

function emptyBars() {
    $(".bar").each(function () {
        $(this).find(".progress").removeClass("easing-long").css("width", 0)
    })
}

function showLoader() {
    $(".loader").show().spin({
        lines: 7,
        length: 1,
        width: 5,
        radius: 7,
        corners: 0,
        rotate: 41,
        color: "#fff",
        speed: 1.5,
        trail: 70,
        shadow: !1,
        hwaccel: !0,
        className: "spinner",
        zIndex: 2e9,
        top: 10,
        left: 12
    })
}

function hideLoader() {
    $(".loader").spin(!1).hide()
}
var portfolioKeyword, ajaxClicked, pActive, inAnimation, outAnimation, safeModPageInAnimation, safeModPageOutAnimation, lightboxInAnimation, duration, safeMod = !1;
$(function () {
    function e() {
        $(".page").removeClass("active").hide();
        var e = $.address.path();
        if (e = e.slice(1, e.length), "" == (e = -1 != giveDetailUrl() ? portfolioKeyword : e)) {
            var t = $("#header ul li").first().find("a").attr("href");
            e = t.slice(2, t.length), $.address.path(e)
        }
        // if (Modernizr.csstransforms && Modernizr.csstransforms3d ? $("#" + e).show().removeClass("animated " + safeModPageOutAnimation).addClass("animated " + safeModPageInAnimation) : ($("#" + e).fadeIn(), $(".page.active").hide()), $("#" + e).addClass("active"), setTimeout(function () {
        //         setCurrentMenuItem()
        //     }, 100), -1 != e.indexOf(portfolioKeyword) && (setupPortfolio(), setTimeout(function () {
        //         setupPortfolio()
        //     }, 1e3)), $(".page.resume").hasClass("active") && (emptyBars(), animateBars()), $("body").scrollTop(0), $(".page.active .map iframe").length) {
        //     var a = $(".page.active .map").html();
        //     $("page.active .map").empty(), setTimeout(function () {
        //         $(".page.active .map").html(a)
        //     }, 100)
        // }
    }
    jQuery.browser.touch && $("html").addClass("touch"), portfolioKeyword = $(".portfolio").attr("id"), initializeAnimations();
    var t = giveDetailUrl();
    $.address.change(function () {
        var e = giveDetailUrl(); - 1 != e ? showProjectDetails(e) : -1 != $.address.path().indexOf("/" + portfolioKeyword) && hideProjectDetails(!0, !1)
    });
    var a = null != navigator.userAgent.match(/OS 5_[0-9_]+ like Mac OS X/i) || null != navigator.userAgent.match(/OS 4_[0-9_]+ like Mac OS X/i) || null != navigator.userAgent.match(/OS 3_[0-9_]+ like Mac OS X/i);
    safeMod = "true" === $("html").attr("data-safeMod"), mobileSafeMod = "true" === $("html").attr("data-mobileSafeMod") && jQuery.browser.mobile, (safeMod = safeMod || mobileSafeMod || a) && ($("html").removeClass("no-overflow").addClass("safe-mod"), e(), $.address.change(function () {
        e()
    })), -1 == t || safeMod || $.address.path(portfolioKeyword), safeMod || $("#pages").jmpress({
        stepSelector: ".page",
        fullscreen: !1,
        transitionDuration: duration,
        animation: {
            transitionDuration: duration / 1e3 + "s"
        },
        mouse: {
            clickSelects: !1
        },
        keyboard: {
            use: !1
        },
        idle: function () {
            setCurrentMenuItem(), refreshScrollBars()
        },
        beforeChange: function (e) {
            $(e[0]).hasClass("resume") && animateBars()
        }
    }), -1 != t && setTimeout(function () {
        $.address.path(portfolioKeyword + "/" + t)
    }, 2e3), $("#header nav ul a").click(function () {
        $(this).parent().hasClass("current-menu-item") || ($(this).addClass("waiting"), $("#header nav ul li").removeClass("current-menu-item"))
    });
    var o = $("#header nav ul").clone();
    $("#header nav").prepend('<select aria-label="navigation" class="mobile-nav"></select>');
    var i = $("select.mobile-nav");
    $(o).children("li").each(function () {
        $(i).append(function (e, t) {
            return '<option value="' + e.children("a").attr("href") + '"> ' + t + e.children("a").text() + "</option>"
        }($(this), ""))
    }), $(i).change(function () {
        location = this.options[this.selectedIndex].value
    }), safeMod || (setupScrollBars(), $(window).resize(function () {
        refreshScrollBars()
    })), safeMod || setupPortfolio(), $("a.ajax").live("click", function () {
        var e = $(this).attr("href"),
            a = $.address.baseURL();
        if (-1 != e.indexOf(a)) {
            var o = e.length;
            t = e.slice(a.length + 1, o)
        } else t = e;
        return $.address.path(portfolioKeyword + "/" + t), "8." == jQuery.browser.version.substring(0, 2) || "7." == jQuery.browser.version.substring(0, 2)
    }), jQuery.ajaxSetup({
        beforeSend: function () {
            showLoader()
        },
        complete: function () {},
        success: function () {
            giveDetailUrl || setTimeout(function () {
                hideLoader()
            }, 500)
        }
    })
}), window.onload = function () {
    safeMod || refreshScrollBars()
};